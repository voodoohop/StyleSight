{"version":3,"sources":["stylesight.concat.js"],"names":["degToRad","x","Math","PI","getVideoFeed","video","Promise","resolve","getVideoFeedAttempts","errMessage","test","navigator","userAgent","window","MSStream","location","protocol","startsWith","mozGetUserMedia","audio","facingMode","stream","srcObject","err","console","log","alert","mediaDevices","getUserMedia","then","catch","webkitGetUserMedia","msGetUserMedia","e","addEventListener","async","document","querySelector","controls","classList","toggle","activeStyle","styles","id","name","Net","forEach","style","img","styleDiv","createElement","className","label","innerHTML","loadingContainer","spinner","loadingNote","width","onload","src","appendChild","stylesContainer","hasTexture","styleBox","visible","makeBoxObject","model","display","opacity","loadStyle","done","total","parseInt","remove","requestAnimationFrame","renderer","THREE","WebGLRenderer","antialias","alpha","setSize","innerWidth","innerHeight","body","domElement","backgroundColor","vrDisplay","effect","VREffect","separation","getVRDisplays","displays","length","enterVRButton","getElementById","contains","includes","requestPresent","source","StereoEffect","add","scene","Scene","boxMaterial","texture","box","styleMaterial","styleTexture","camera","PerspectiveCamera","inferenceCanvas","inferenceContext","getContext","autoplay","height","boxWidth","boxHeight","boxGeometry","BoxGeometry","Texture","minFilter","NearestFilter","ShaderMaterial","uniforms","type","value","vertexShader","vertexShaderSource","text","fragmentShader","getVideoShader","Mesh","position","z","atan","inferring","multScalar","tf","scalar","render","currentTime","needsUpdate","hasOwnProperty","drawImage","result","tidy","preprocessed","fromPixels","inferenceResult","predict","dispose","mul","shape","endTimer","Number","floor","random","toString","time","timeEnd","timer","data","rgbaData","Uint8Array","i","image","styleGeometry","DataTexture","RGBAFormat","UnsignedByteType","flipY","transparent","radius","parseFloat","radiusSlider","compileShader","nextFrame","setTimeout","onloadedmetadata","href","fullscreenEnabled","requestFullScreen","webkitFullscreenEnabled","webkitRequestFullScreen","mozFullScreenEnabled","mozRequestFullScreen","msFullScreenEnabled","msRequestFullScreen","aspect","updateProjectionMatrix","pause","resolutionSlider","updateRadius","updateOpacity","opacitySlider","ckptsDir","URL","substr","lastIndexOf","[object Object]","callback","checkpointManifest","vs","getVariable","fetch","r","arrayBuffer","values","Float32Array","Tensor","make","json","manifest","variableNames","Object","keys","variablePromises","map","donePromises","p","all","variables","val","vi","preprocessedInput","dtype","conv1","this","convLayer","conv2","conv3","resid1","residualBlock","resid2","resid3","resid4","resid5","convT1","convTransposeLayer","convT2","convT3","outTanh","tanh","scaled","shifted","clamped","clipByValue","input","strides","relu","varId","y","conv2d","varName","y2","instanceNorm","numFilters","newShape","conv2dTranspose","addStrict","inDepth","moments","mu","mean","sigmaSq","variance","shift","scale","normalized","div","sub","sqrt","as3D"],"mappings":"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","file":"stylesight.min.js"}